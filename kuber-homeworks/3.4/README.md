# Домашнее задание к занятию «Обновление приложений»

### Цель задания

Выбрать и настроить стратегию обновления приложения.

-----

### Задание 1. Выбрать стратегию обновления приложения и описать ваш выбор

1. Имеется приложение, состоящее из нескольких реплик, которое требуется обновить.
2. Ресурсы, выделенные для приложения, ограничены, и нет возможности их увеличить.
3. Запас по ресурсам в менее загруженный момент времени составляет 20%.
4. Обновление мажорное, новые версии приложения не умеют работать со старыми.
5. Вам нужно объяснить свой выбор стратегии обновления приложения.

### Ответ

Для данного сценария я бы рекомендовал использовать стратегию постепенного обновления (rolling update). При постепенном обновлении новая версия приложения будет внедряться постепенно, по одной реплике за раз, что позволит нам сэкономить ресурсы и снизить риски сбоев и проблем в процессе обновления.

Обоснование выбора стратегии обновления:

1. Ограниченные ресурсы: При наличии ограниченных ресурсов необходимо минимизировать нагрузку на инфраструктуру при обновлении приложения. Постепенное обновление позволяет распределить нагрузку на ресурсы во времени, что поможет избежать перегрузок и снизить риск отказов.

2. Запас по ресурсам: Имея запас ресурсов в менее загруженное время, мы можем использовать его для постепенного обновления без существенного влияния на производительность приложения. Это поможет нам избежать критических ситуаций при обновлении.

3. Мажорное обновление: Так как новые версии приложения не совместимы со старыми, требуется аккуратное и последовательное обновление. Постепенное обновление позволяет избежать проблем совместимости и обеспечить плавный переход к новой версии.

4. Минимизация времени простоя: Постепенное обновление позволяет избежать длительного простоя приложения, так как каждая реплика обновляется по одной за раз, в то время как остальные продолжают обслуживание запросов.

5. Возможность отката: При постепенном обновлении есть возможность откатиться к предыдущей версии, если возникнут проблемы с новой версией. Это повышает безопасность и позволяет быстро вернуться к стабильной работе приложения в случае неудачного обновления.

В итоге, стратегия постепенного обновления позволяет сбалансировать нагрузку на ресурсы, минимизировать риски и обеспечить плавный переход к новой версии приложения без значительного влияния на его работу и доступность.

### Задание 2. Обновить приложение

1. Создать deployment приложения с контейнерами nginx и multitool. Версию nginx взять 1.19. Количество реплик — 5.
2. Обновить версию nginx в приложении до версии 1.20, сократив время обновления до минимума. Приложение должно быть доступно.
3. Попытаться обновить nginx до версии 1.28, приложение должно оставаться доступным.
4. Откатиться после неудачного обновления.

### Ответ


-----