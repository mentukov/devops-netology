# Домашнее задание к занятию «Компоненты Kubernetes»

### Цель задания

Рассчитать требования к кластеру под проект

### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

### Ответ

Для решения данной задачи требуется следующее количество ресурсов:

1. Упаковка приложения в чарт для деплоя в разные окружения не требует дополнительных ресурсов, поскольку это процесс сборки и конфигурации, который может быть выполнен на отдельной системе без дополнительного выделения ресурсов.

2. Для отказоустойчивой базы данных, требуется:
   - Оперативная память (ОЗУ): 4 ГБ * 3 копии = 12 ГБ
   - Ядра процессора: 1 ядро * 3 копии = 3 ядра

3. Для отказоустойчивого кеша, требуется:
   - Оперативная память (ОЗУ): 4 ГБ * 3 копии = 12 ГБ
   - Ядра процессора: 1 ядро * 3 копии = 3 ядра

4. Для фронтенда, требуется:
   - Оперативная память (ОЗУ): 50 МБ * 5 копий = 250 МБ
   - Ядра процессора: 0.2 ядра * 5 копий = 1 ядро

5. Для бекенда, требуется:
   - Оперативная память (ОЗУ): 600 МБ * 10 копий = 6 ГБ
   - Ядра процессора: 1 ядро * 10 копий = 10 ядер

Таким образом, общие требуемые ресурсы для проекта:
- Оперативная память (ОЗУ): 12 ГБ + 12 ГБ + 250 МБ + 6 ГБ = 18.25 ГБ (или округленно 18.5 ГБ)
- Ядра процессора: 3 ядра + 3 ядра + 1 ядро + 10 ядер = 17 ядер

### UPD

Для минимальной отказоустойчивости необходим кворум (2+1)
- control node -3
- worker node -3

характеристики control node:
- 2 cpu 2 ram X 3

характеристики worker node (ресурсы увеличил на случай отказа ноды или апдейтов):
- 20 cpu 32 ram X 3

----
